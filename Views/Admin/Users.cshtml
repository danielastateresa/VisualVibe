@model List<VisualVibe.Models.User>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VisualVibe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true">
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div class="sidebar d-flex flex-column">
            <div class="brand text-center py-4">
                <img src="~/img/logo.png" style="width: 100%; height: 150px; object-fit: contain; margin-bottom: 2px;">
            </div>
            <a href="/Admin/Dashboard" class="nav-link active"><i class="bi bi-grid-fill me-2"></i>Dashboard</a>
            <a href="/Admin/Bookings" class="nav-link"><i class="bi bi-calendar2-check-fill me-2"></i>Bookings</a>
            <a href="/Admin/Users" class="nav-link"><i class="bi bi-people-fill me-2"></i>Users</a>
            <a href="/Admin/Services" class="nav-link"><i class="bi bi-shop-window me-2"></i>Services</a>
            <a href="/Admin/Inbox" class="nav-link"><i class="bi bi-envelope-fill me-2"></i>Inbox</a>
            <a href="/Admin/Messages" class="nav-link"><i class="bi bi-chat-dots-fill me-2"></i>Messages</a>
        </div>

        <!-- Main Content -->
        <div class="flex-grow-1 p-4">
            <div class="d-flex justify-content-end align-items-center mb-4 position-fixed-top-right">
                <div class="dropdown">
                    <a class="d-flex align-items-center text-decoration-none dropdown-toggle" style="color:black;" href="#" role="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4 me-2"></i>
                        <span class="profile">Nico Robin</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><a class="dropdown-item" href="/Profile/Profile">Profile</a></li>
                        <li><a class="dropdown-item" href="/Settings">Settings</a></li>
                        <li>
                            <form asp-controller="Account" asp-action="Logout" method="post" id="logoutForm">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-link text-danger">Logout</button>
                            </form>

                        </li>
                    </ul>
                </div>
            </div>

            <h1 class="mb-4 fw-bold">Users</h1>

            <div class="tab-links mb-3 d-flex align-items-center">
                <div class="flex-grow-1">
                    <a href="#" class="active me-3">Admin</a>
                    <a href="#" class="me-3">Customer</a>
                    <a href="#">Vendor</a>
                </div>
                <a href="/Admin/Add" class="btn btn-light" style="padding-top: 0;">
                    <i class="bi bi-plus-lg me-1"></i> Add Admin
                </a>
            </div>


            <div class="table-responsive">
                <table class="table table-hover text-center align-middle">
                    <thead>
                        <tr>
                            <th style="background-color: #1e3269; color: white;">ID</th>
                            <th style="background-color: #1e3269; color: white;">Name</th>
                            <th style="background-color: #1e3269; color: white;">Address</th>
                            <th style="background-color: #1e3269; color: white;">Email</th>
                            <th style="background-color: #1e3269; color: white;">Number</th>
                            <th style="background-color: #1e3269; color: white;">Position</th>
                            <th style="background-color: #1e3269; color: white;">Action</th>
                        </tr>
                    </thead>
                    <style>
                        tbody td {
                            font-weight: normal !important;
                        }
                    </style>
                    <tbody>
                        @foreach (var user in Model)
                        {
                            <tr>
                                <td>@user.Id</td>
                                <td>@user.Name</td>
                                <td>@user.Address</td>
                                <td>@user.Email</td>
                                <td>@user.Number</td>
                                <td>@user.Position</td>
                                <td>
                                    <div class="d-flex justify-content-center gap-2">
                                    <button type="button" class="btn btn-link p-0" style="color: black;" data-bs-toggle="modal" data-bs-target="#viewUserModal"
                                            data-id="@user.Id"
                                            data-name="@user.Name"
                                            data-address="@user.Address"
                                            data-email="@user.Email"
                                            data-number="@user.Number"
                                            data-position="@user.Position">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <a asp-controller="Admin" asp-action="Edit" asp-route-id="@user.Id" class="btn btn-link p-0" style="color: black;">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                    <a asp-controller="Admin" asp-action="Delete" asp-route-id="@user.Id" class="btn btn-link p-0" style="color: black;" onclick="return confirm('Are you sure?');">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- View Modal -->
    <div class="modal fade" id="viewUserModal" tabindex="-1" aria-labelledby="viewUserLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="viewUserLabel">User Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>ID:</strong> <span id="viewId"></span></p>
                    <p><strong>Name:</strong> <span id="viewName"></span></p>
                    <p><strong>Address:</strong> <span id="viewAddress"></span></p>
                    <p><strong>Email:</strong> <span id="viewEmail"></span></p>
                    <p><strong>Number:</strong> <span id="viewNumber"></span></p>
                    <p><strong>Position:</strong> <span id="viewPosition"></span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Populate modal with data from data attributes
        const viewModal = document.getElementById('viewUserModal');
        viewModal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget;
            document.getElementById('viewId').textContent = button.getAttribute('data-id');
            document.getElementById('viewName').textContent = button.getAttribute('data-name');
            document.getElementById('viewAddress').textContent = button.getAttribute('data-address');
            document.getElementById('viewEmail').textContent = button.getAttribute('data-email');
            document.getElementById('viewNumber').textContent = button.getAttribute('data-number');
            document.getElementById('viewPosition').textContent = button.getAttribute('data-position');
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
</body>
</html>


